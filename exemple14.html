<!--composant -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script type="importmap">
    {
      "imports": {
        "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
  <div id="app6" class="container">
    <titre :texte="title"></titre>
    <ol>
    <li v-for="(todo, index) in todos" :key="index" :class="{ 'alert alert-success': todo.completed }">
        <div class="checkbox">
            <tache :todo="todo"></tache>
        </div>
    </li>
    </ol>
    <div class="input-group mb-3">
      <input type="text" class="form-control" v-model="newTaskText" @keyup.enter="addTask">
      <button class="btn btn-outline-secondary" v-on:click="addTask">Ajouter</button>
    </div>
  </div>

  <script type="module">
    import { createApp } from 'vue';

    createApp({
        
      data() {
        return {
          todos: [],
          title: 'Mes tÃ¢ches urgentes:',
          newTaskText: '' 
        };
      },
      mounted() {
        fetch('https://jsonplaceholder.typicode.com/todos')
        .then(response => response.json())
        .then(json => {
          this.todos = json;
        });
    },
        components: {
        'titre': {
        props: ['texte'],
        template: '<h2>{{ texte }}</h2>'
        },
        'tache': {
        props: ['todo'],
        template: `
        
        <label><input type="checkbox" v-model="todo.completed">{{ todo.title }}</label>`
        }
    },
      methods: {
        addTask() {
            this.todos.push({ text: this.newTaskText, checked: false });
            this.newTaskText = ''; 

        }
      }
    }).mount('#app6');
  </script>
</body>
</html>
